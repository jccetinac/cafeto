{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/cafeto/client/src/components/Comments.js\";\nimport React, { Component } from 'react';\n\nclass Comments extends Component {\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      description: '',\n      _id: '',\n      tasks: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.addTask = this.addTask.bind(this);\n  }\n\n  handleChange(e) {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  addTask(e) {\n    e.preventDefault();\n    const IDMOVIE = this.props.idmovie;\n    console.log(this.props.idmovie);\n\n    if (this.state._id) {\n      fetch(\"/api/tasks/\".concat(this.state._id), {\n        method: 'PUT',\n        body: JSON.stringify({\n          title: this.state.title,\n          description: this.state.description,\n          idmovie: this.props.idmovie\n        }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(data => {\n        this.setState({\n          _id: '',\n          title: '',\n          description: ''\n        });\n        this.fetchTasks();\n      });\n    } else {\n      fetch('/api/tasks', {\n        method: 'POST',\n        body: JSON.stringify({\n          id: this.state._id,\n          title: this.state.title,\n          description: this.state.description,\n          idmovie: IDMOVIE\n        }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(data => {\n        console.log(data);\n        this.setState({\n          title: '',\n          description: ''\n        });\n        this.fetchTasks();\n      }).catch(err => console.error(err));\n    }\n  }\n\n  deleteTask(id) {\n    if (confirm('Are you sure you want to delete it?')) {\n      fetch(\"/api/tasks/\".concat(id), {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(data => {\n        console.log(data);\n        this.fetchTasks();\n      });\n    }\n  }\n\n  editTask(id) {\n    fetch(\"/api/tasks/\".concat(id)).then(res => res.json()).then(data => {\n      console.log(data);\n      this.setState({\n        title: data.title,\n        description: data.description,\n        _id: data._id\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchTasks();\n  }\n\n  fetchTasks() {\n    fetch('/api/tasks').then(res => res.json()).then(data => {\n      this.setState({\n        tasks: data\n      });\n      console.log(this.state.tasks);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card p-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Add Comments\"), React.createElement(\"form\", {\n      onSubmit: this.addTask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control mb-2\",\n      name: \"title\",\n      onChange: this.handleChange,\n      value: this.state.title,\n      type: \"text\",\n      placeholder: \"Task Title\",\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      className: \"form-control mb-2\",\n      name: \"description\",\n      onChange: this.handleChange,\n      value: this.state.description,\n      cols: \"30\",\n      rows: \"10\",\n      placeholder: \"Task Description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-block btn-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Send\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Old Comments\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), this.state.tasks.map(task => {\n      return task.idmovie === this.props.idmovie ? React.createElement(\"span\", {\n        key: task._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, task.description), React.createElement(\"button\", {\n        onClick: () => this.deleteTask(task._id),\n        className: \"btn btn-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"delete\")), React.createElement(\"button\", {\n        onClick: () => this.editTask(task._id),\n        className: \"btn btn-success\",\n        style: {\n          margin: '4px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"edit\"))) : null;\n    }))));\n  }\n\n}\n\nexport default Comments;","map":{"version":3,"sources":["/Users/admin/Desktop/cafeto/client/src/components/Comments.js"],"names":["React","Component","Comments","constructor","state","title","description","_id","tasks","handleChange","bind","addTask","e","target","name","value","setState","preventDefault","IDMOVIE","props","idmovie","console","log","fetch","method","body","JSON","stringify","headers","then","res","json","data","fetchTasks","id","catch","err","error","deleteTask","confirm","editTask","componentDidMount","render","map","task","margin"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,MAAMC,QAAN,SAAuBD,SAAvB,CAAiC;AAE/BE,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,EADI;AAEXC,MAAAA,WAAW,EAAE,EAFF;AAGXC,MAAAA,GAAG,EAAE,EAHM;AAIXC,MAAAA,KAAK,EAAE;AAJI,KAAb;AAMA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAf;AACD;;AAEDD,EAAAA,YAAY,CAACG,CAAD,EAAI;AAAA,sBACUA,CAAC,CAACC,MADZ;AAAA,UACNC,IADM,aACNA,IADM;AAAA,UACAC,KADA,aACAA,KADA;AAEd,SAAKC,QAAL,CAAc;AACZ,OAACF,IAAD,GAAQC;AADI,KAAd;AAGD;;AAEDJ,EAAAA,OAAO,CAACC,CAAD,EAAI;AACTA,IAAAA,CAAC,CAACK,cAAF;AACA,UAAMC,OAAO,GAAG,KAAKC,KAAL,CAAWC,OAA3B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKH,KAAL,CAAWC,OAAvB;;AACA,QAAG,KAAKhB,KAAL,CAAWG,GAAd,EAAmB;AACjBgB,MAAAA,KAAK,sBAAe,KAAKnB,KAAL,CAAWG,GAA1B,GAAiC;AACpCiB,QAAAA,MAAM,EAAE,KAD4B;AAEpCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBtB,UAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KADC;AAEnBC,UAAAA,WAAW,EAAE,KAAKF,KAAL,CAAWE,WAFL;AAGnBc,UAAAA,OAAO,EAAE,KAAKD,KAAL,CAAWC;AAHD,SAAf,CAF8B;AAOpCQ,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB;AAFT;AAP2B,OAAjC,CAAL,CAYGC,IAZH,CAYQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAZf,EAaGF,IAbH,CAaQG,IAAI,IAAI;AACZ,aAAKhB,QAAL,CAAc;AAACT,UAAAA,GAAG,EAAE,EAAN;AAAUF,UAAAA,KAAK,EAAE,EAAjB;AAAqBC,UAAAA,WAAW,EAAE;AAAlC,SAAd;AACA,aAAK2B,UAAL;AACD,OAhBH;AAiBD,KAlBD,MAkBO;AACLV,MAAAA,KAAK,CAAC,YAAD,EAAe;AAClBC,QAAAA,MAAM,EAAE,MADU;AAElBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CACF;AACEO,UAAAA,EAAE,EAAC,KAAK9B,KAAL,CAAWG,GADhB;AAEEF,UAAAA,KAAK,EAAC,KAAKD,KAAL,CAAWC,KAFnB;AAGEC,UAAAA,WAAW,EAAC,KAAKF,KAAL,CAAWE,WAHzB;AAIEc,UAAAA,OAAO,EAAEF;AAJX,SADE,CAFY;AAUlBU,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB;AAFT;AAVS,OAAf,CAAL,CAeGC,IAfH,CAeQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAff,EAgBGF,IAhBH,CAgBQG,IAAI,IAAI;AACZX,QAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ;AACA,aAAKhB,QAAL,CAAc;AAACX,UAAAA,KAAK,EAAE,EAAR;AAAYC,UAAAA,WAAW,EAAE;AAAzB,SAAd;AACA,aAAK2B,UAAL;AACD,OApBH,EAqBGE,KArBH,CAqBSC,GAAG,IAAIf,OAAO,CAACgB,KAAR,CAAcD,GAAd,CArBhB;AAsBD;AAEF;;AAEDE,EAAAA,UAAU,CAACJ,EAAD,EAAK;AACb,QAAGK,OAAO,CAAC,qCAAD,CAAV,EAAmD;AACjDhB,MAAAA,KAAK,sBAAeW,EAAf,GAAqB;AACxBV,QAAAA,MAAM,EAAE,QADgB;AAExBI,QAAAA,OAAO,EAAE;AACP,oBAAU,kBADH;AAEP,0BAAgB;AAFT;AAFe,OAArB,CAAL,CAOGC,IAPH,CAOQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPf,EAQGF,IARH,CAQQG,IAAI,IAAI;AACZX,QAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ;AACA,aAAKC,UAAL;AACD,OAXH;AAYD;AACF;;AAEDO,EAAAA,QAAQ,CAACN,EAAD,EAAK;AACXX,IAAAA,KAAK,sBAAeW,EAAf,EAAL,CACGL,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAEQG,IAAI,IAAI;AACZX,MAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ;AACA,WAAKhB,QAAL,CAAc;AACZX,QAAAA,KAAK,EAAE2B,IAAI,CAAC3B,KADA;AAEZC,QAAAA,WAAW,EAAE0B,IAAI,CAAC1B,WAFN;AAGZC,QAAAA,GAAG,EAAEyB,IAAI,CAACzB;AAHE,OAAd;AAKD,KATH;AAUD;;AAEDkC,EAAAA,iBAAiB,GAAG;AAClB,SAAKR,UAAL;AACD;;AAEDA,EAAAA,UAAU,GAAG;AACXV,IAAAA,KAAK,CAAC,YAAD,CAAL,CACGM,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADf,EAEGF,IAFH,CAEQG,IAAI,IAAI;AACZ,WAAKhB,QAAL,CAAc;AAACR,QAAAA,KAAK,EAAEwB;AAAR,OAAd;AACAX,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKlB,KAAL,CAAWI,KAAvB;AACD,KALH;AAMD;;AAGCkC,EAAAA,MAAM,GAAE;AACN,WACK;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADR,EAEU;AAAM,MAAA,QAAQ,EAAE,KAAK/B,OAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,SAAS,EAAC,mBAAjB;AAAqC,MAAA,IAAI,EAAC,OAA1C;AAAkD,MAAA,QAAQ,EAAE,KAAKF,YAAjE;AAA+E,MAAA,KAAK,EAAE,KAAKL,KAAL,CAAWC,KAAjG;AAAwG,MAAA,IAAI,EAAC,MAA7G;AAAoH,MAAA,WAAW,EAAC,YAAhI;AAA6I,MAAA,SAAS,MAAtJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAW,MAAA,SAAS,EAAC,mBAArB;AAAyC,MAAA,IAAI,EAAC,aAA9C;AAA4D,MAAA,QAAQ,EAAE,KAAKI,YAA3E;AAAyF,MAAA,KAAK,EAAE,KAAKL,KAAL,CAAWE,WAA3G;AAAwH,MAAA,IAAI,EAAC,IAA7H;AAAkI,MAAA,IAAI,EAAC,IAAvI;AAA4I,MAAA,WAAW,EAAC,kBAAxJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,wBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,CAFV,EAOU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAI,MAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,EACsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADtC,EAC2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD3C,EAIG,KAAKF,KAAL,CAAWI,KAAX,CAAiBmC,GAAjB,CAAqBC,IAAI,IAAI;AAE5B,aAAOA,IAAI,CAACxB,OAAL,KAAe,KAAKD,KAAL,CAAWC,OAA1B,GACH;AAAM,QAAA,GAAG,EAAEwB,IAAI,CAACrC,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIqC,IAAI,CAACtC,WAAT,CADF,EAEE;AAAQ,QAAA,OAAO,EAAE,MAAM,KAAKgC,UAAL,CAAgBM,IAAI,CAACrC,GAArB,CAAvB;AAAkD,QAAA,SAAS,EAAC,gBAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAG,QAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,CAFF,EAKA;AAAQ,QAAA,OAAO,EAAE,MAAM,KAAKiC,QAAL,CAAcI,IAAI,CAACrC,GAAnB,CAAvB;AAAgD,QAAA,SAAS,EAAC,iBAA1D;AAA4E,QAAA,KAAK,EAAE;AAACsC,UAAAA,MAAM,EAAE;AAAT,SAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CALA,CADG,GAUD,IAVN;AAYC,KAdF,CAJH,CAPV,CADH,CADL;AAmCD;;AAtJ4B;;AA0J/B,eAAe3C,QAAf","sourcesContent":["import React, { Component } from 'react';\n\nclass Comments extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      description: '',\n      _id: '',\n      tasks: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.addTask = this.addTask.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  addTask(e) {\n    e.preventDefault();\n    const IDMOVIE = this.props.idmovie;\n    console.log(this.props.idmovie);\n    if(this.state._id) {\n      fetch(`/api/tasks/${this.state._id}`, {\n        method: 'PUT',\n        body: JSON.stringify({\n          title: this.state.title,\n          description: this.state.description,\n          idmovie: this.props.idmovie\n        }),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          this.setState({_id: '', title: '', description: ''});\n          this.fetchTasks();\n        });\n    } else {\n      fetch('/api/tasks', {\n        method: 'POST',\n        body: JSON.stringify(\n            {\n              id:this.state._id,\n              title:this.state.title,\n              description:this.state.description,\n              idmovie: IDMOVIE\n            }    \n          ),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          console.log(data);\n          this.setState({title: '', description: ''});\n          this.fetchTasks();\n        })\n        .catch(err => console.error(err));\n    }\n\n  }\n\n  deleteTask(id) {\n    if(confirm('Are you sure you want to delete it?')) {\n      fetch(`/api/tasks/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          console.log(data);\n          this.fetchTasks();\n        });\n    }\n  }\n\n  editTask(id) {\n    fetch(`/api/tasks/${id}`)\n      .then(res => res.json())\n      .then(data => {\n        console.log(data);\n        this.setState({\n          title: data.title,\n          description: data.description,\n          _id: data._id\n        });\n      });\n  }\n\n  componentDidMount() {\n    this.fetchTasks();\n  }\n\n  fetchTasks() {\n    fetch('/api/tasks')\n      .then(res => res.json())\n      .then(data => {\n        this.setState({tasks: data});\n        console.log(this.state.tasks);\n      });\n  }\n \n\n    render(){ \n      return (\n           <div className='col-md-6'>\n              <div className='card p-4'>\n                      <h4>Add Comments</h4>\n                        <form onSubmit={this.addTask}>\n                          <input className=\"form-control mb-2\" name=\"title\" onChange={this.handleChange} value={this.state.title} type=\"text\" placeholder=\"Task Title\" autoFocus/>\n                          <textarea  className=\"form-control mb-2\" name=\"description\" onChange={this.handleChange} value={this.state.description} cols=\"30\" rows=\"10\" placeholder=\"Task Description\"></textarea>\n                          <button type=\"submit\" className=\"btn btn-block btn-info\">Send</button>\n                        </form>\n                        <div>\n                        <h5 className='mt-2'>Old Comments</h5><br/><hr/>\n                        { \n                           \n                           this.state.tasks.map(task => {\n                              \n                            return task.idmovie===this.props.idmovie ? (\n                                <span key={task._id}>        \n                                  <p>{task.description}</p>\n                                  <button onClick={() => this.deleteTask(task._id)} className=\"btn btn-danger\">\n                                  <i className=\"material-icons\">delete</i> \n                                </button>\n                                <button onClick={() => this.editTask(task._id)} className=\"btn btn-success\" style={{margin: '4px'}}>\n                                  <i className=\"material-icons\">edit</i>\n                                </button>    \n                                </span>\n                              ) : null;\n\n                            })\n                        }\n                        </div>\n                </div>  \n            </div> \n      \n      ) \n     \n    }\n  }\n  \n  \n  export default Comments;"]},"metadata":{},"sourceType":"module"}